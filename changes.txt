
* バージョン履歴

** 2.16
ハードウェアキーのみの機種でも動くようなUIだったので、
<uses-feature android:name="android.hardware.touchscreen" android:required="false"/>
をマニフェストに追加して対応機種を増やしました。

アップロード処理をバックグラウンドサービス化しました。
アップロード中に画面が回転したり、ホームキーを押して他のアプリを起動したりしてもアップロードが裏で動き続けてます。
タスク切り替えで単独起動の場合はImgurマッシュを、それ以外の場合はImgurマッシュを起動したアプリを選ぶと
アップロードが継続していたり、アップロード結果が表示/処理されるのを確認できるはずです。
機種やキャリアにもよってはアップロード中に電話がかかってきても大丈夫なこともあります。

** 2.15 
- アカウント追加画面で出ていたクラッシュの対策。
「CookieSyncManager::createInstance() needs to be called before CookieSyncManager::getInstance()」
これってどの端末で再現できるんだ…？
- ほか,Imgurのエラーが明け方～日中に多かったのでアカウント追加画面のエラー遷移を吟味しました

** 2.14
- 一括投稿画面のタイトル文字数を短くした(共有インテントを送る側のアプリのレイアウトに配慮)
- アップロードダイアログが出ている間はスクリーンタイムアウトが発生しないようにした。でも手動スクリーンオフや端末の自動回転があるとまだおかしな挙動になる
- アップロードダイアログの表記を変更。一括アップロード時のファイル数やリトライ回数の表示をつけた
- Imgurサーバにアクセスした際のエラーをSDカードに保存する機能をつけた
- 保存したエラーを後から表示できる機能をつけた
- ImgurサーバのAPI呼び出し回数の制限を確認する画面をつけた
- 加工開始時にExifを読んで回転指定を初期化するオプションをつけた
- 削除処理のエラーもSDカードに保存できるようにした

** 2.13
- 機内モードで一括アップロードしようとするとリトライを続けるバグを修正
- 一括投稿画面でリストを編集してから画面を回転させると回転後に編集内容が消えている問題を修正

** 2.12
- 出力するURLの直前と直後に付与するテキストを設定できるようにした
- 端末のSSL証明書が古い場合のエラーメッセージを改善
- 履歴をエクスポートする機能を追加
- 一括投稿機能を試験搭載

** 2.11
- 画像選択を自動開始 が画面回転の後に再発生してしまうバグを修正
- 履歴画面のレイアウトを変更
- Geotrust証明書が入ってない端末でアカウントを追加した際のエラーメッセージを追加
- 加工ボタンの有効無効切り替えをsetVisibilityからsetEnabledに変更
- メイン画面のメニューの並びを変更
- 履歴画面のDBカーソル閉じ忘れを修正
- アカウント中にアルバムが存在しない場合にImgurから返ってくるエラーに対応

** 2.10
- 加工前の画像がJPEG以外なら、回転なしリサイズ無し切り抜きなしでも加工をスキップしないようにした
- メイン画面加工画面の横向きレイアウトでScrollView内部を下揃えにした

** 2.9
- メイン画面からカメラ撮影を呼び出す機能をつけた
- 選択と撮影と加工ボタンにアイコンをつけた

** 2.8
- リサイズ指定の一覧をソートするようにした
- Imgurサーバからのエラーメッセージを整形して表示するようにした。(未知のアルバムエラー対策)
- アカウントを追加した後、メイン画面に戻ったらアルバムリストをリロードするようにした

** 2.7
- 横画面レイアウトを用意した



* 過去にあった不具合とその原因、対策
--
IS01とIDEOSで、アカウントを追加しようとするとGeotrust証明書が入ってないのでSSLのサーバ認証に失敗する。
エラーメッセージを強化してユーザが問題を把握しやすいようにした
--
レイアウトを待つために処理を遅延させる前後で、現在選択中のファイルの情報を上書きしてしまっていた。
どの場合でも現在選択中のファイルを更新してから遅延処理を行うようにした
--
操作の省略をONにしているとアルバムの選択が維持されない。
アルバム選択肢の永続的なキャッシュを用意して解決した
--
アカウントの追加を行った直後にメイン画面に戻ると、アルバム選択肢がリロードされなかった。
単純な実装漏れ。
--
アカウントを何度か選択しなおすとアルバムの選択肢が消える。
adapterにセットしている配列をクリアしていたが、その配列はloaderがキャッシュとして保持しているものだった
--
履歴画面でアルバム選択肢が「全てのアルバム」の時にアカウントを選んでも、実際のフィルタが更新されない。
アルバム選択肢の選択インデクスが変化しないため、アルバム選択変更のイベントが呼ばれないのが原因だった。
--
操作の省略をONにして加工中に回転してから加工を完了すると、加工前の画像がアップロードされる。
--
IS01の横画面で一部ダイアログが操作できない
ダイアログにカスタムビューを設定する場合はスクロール可能にする必要があった…
--
SDカードが準備されていない場合やファイルを作成できない場合にエラー表示をおこなっていなかった
エラー処理を改善
--
マルチバイト文字を含むファイルパスを扱えないことがあった
--

* 検討、試行したが却下されたもの

** ActionBar上のメニューボタン
互換性サポートライブラリなしでは1.6との互換性を維持できなかった。
Activityのメソッドをオーバライドする必要があるが、1.6ではクラスロード時にエラーとなる。


